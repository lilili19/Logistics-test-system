layui.define("jquery",function(g){var h=layui.jquery,b=layui.hint(),f="layui-tree-enter",d=function(a){this.options=a},c={arrow:["&#xe623;","&#xe625;"],checkbox:["&#xe626;","&#xe627;"],radio:["&#xe62b;","&#xe62a;"],branch:["&#xe622;","&#xe624;"],leaf:"&#xe621;"};d.prototype.init=function(a){var i=this;a.addClass("layui-box layui-tree"),i.options.skin&&a.addClass("layui-tree-skin-"+i.options.skin),i.tree(a),i.on(a)},d.prototype.tree=function(m,j){var l=this,k=l.options,o=j||k.nodes;layui.each(o,function(i,r){var e=r.children&&r.children.length>0,q=h('<ul class="'+(r.spread?"layui-show":"")+'"></ul>'),p=h(["<li "+(r.spread?'data-spread="'+r.spread+'"':"")+">",function(){return e?'<i class="layui-icon layui-tree-spread">'+(r.spread?c.arrow[1]:c.arrow[0])+"</i>":""}(),function(){return k.check?'<i class="layui-icon layui-tree-check">'+("checkbox"===k.check?c.checkbox[0]:"radio"===k.check?c.radio[0]:"")+"</i>":""}(),function(){return'<a href="'+(r.href||"javascript:;")+'" '+(k.target&&r.href?'target="'+k.target+'"':"")+">"+('<i class="layui-icon layui-tree-'+(e?"branch":"leaf")+'">'+(e?r.spread?c.branch[1]:c.branch[0]:c.leaf)+"</i>")+("<cite>"+(r.name||"未命名")+"</cite></a>")}(),"</li>"].join(""));e&&(p.append(q),l.tree(q,r.children)),m.append(p),"function"==typeof k.click&&l.click(p,r),l.spread(p,r),k.drag&&l.drag(p,r)})},d.prototype.click=function(k,l){var i=this,j=i.options;k.children("a").on("click",function(a){layui.stope(a),j.click(l)})},d.prototype.spread=function(q,s){var k=this,p=(k.options,q.children(".layui-tree-spread")),m=q.children("ul"),t=q.children("a"),j=function(){q.data("spread")?(q.data("spread",null),m.removeClass("layui-show"),p.html(c.arrow[0]),t.find(".layui-icon").html(c.branch[0])):(q.data("spread",!0),m.addClass("layui-show"),p.html(c.arrow[1]),t.find(".layui-icon").html(c.branch[1]))};m[0]&&(p.on("click",j),t.on("dblclick",j))},d.prototype.on=function(m){var j=this,l=j.options,k="layui-tree-drag";m.find("i").on("selectstart",function(a){return !1}),l.drag&&h(document).on("mousemove",function(p){var o=j.move;if(o.from){var a=(o.to,h('<div class="layui-box '+k+'"></div>'));p.preventDefault(),h("."+k)[0]||h("body").append(a);var q=h("."+k)[0]?h("."+k):a;q.addClass("layui-show").html(o.from.elem.children("a").html()),q.css({left:p.pageX+10,top:p.pageY+10})}}).on("mouseup",function(){var a=j.move;a.from&&(a.from.elem.children("a").removeClass(f),a.to&&a.to.elem.children("a").removeClass(f),j.move={},h("."+k).remove())})},d.prototype.move={},d.prototype.drag=function(m,j){var l=this,k=(l.options,m.children("a")),o=function(){var a=h(this),e=l.move;e.from&&(e.to={item:j,elem:m},a.addClass(f))};k.on("mousedown",function(){var a=l.move;a.from={item:j,elem:m}}),k.on("mouseenter",o).on("mousemove",o).on("mouseleave",function(){var n=h(this),i=l.move;i.from&&(delete i.to,n.removeClass(f))})},g("tree",function(j){var i=new d(j=j||{}),a=h(j.elem);return a[0]?void i.init(a):b.error("layui.tree 没有找到"+j.elem+"元素")})});